#!/usr/bin/env bash
set -e

# This script sets up the Python development environment

cd "$(dirname "$0")/.."

echo "== Installing Python dependencies =="

# Create virtual environment if it doesn't exist
if [ ! -d ".venv" ]; then
  echo "Creating virtual environment..."
  python3 -m venv .venv
fi

echo "Activating virtual environment..."
source .venv/bin/activate

echo "Installing requirements..."
.venv/bin/pip install --upgrade pip
.venv/bin/pip install -r requirements.txt
.venv/bin/pip install -r requirements-dev.txt

echo "Installing Playwright browsers..."
.venv/bin/playwright install

echo ""
echo "== Python setup complete! =="
echo ""
echo "To activate the virtual environment, run:"
echo "  source python_services/api/.venv/bin/activate"
