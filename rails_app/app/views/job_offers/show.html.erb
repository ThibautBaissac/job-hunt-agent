<section class="mx-auto max-w-4xl space-y-8">
  <header class="space-y-2">
    <p class="text-xs font-semibold uppercase tracking-wide text-slate-500"><%= @job_offer.company_name %></p>
    <h1 class="text-3xl font-semibold tracking-tight text-indigo-900"><%= @job_offer.title %></h1>
    <div class="flex flex-wrap items-center gap-3 text-sm text-slate-500">
      <% if @job_offer.location.present? %>
        <span><%= @job_offer.location %></span>
      <% end %>
      <% if @job_offer.source_url.present? %>
        <span>•</span>
        <%= link_to "Voir l'offre", @job_offer.source_url, target: "_blank", rel: "noopener", class: "text-indigo-700 underline underline-offset-4" %>
      <% end %>
      <span class="inline-flex items-center rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600">
        Source : <%= @presenter.source_label %>
      </span>
    </div>
  </header>

  <div class="grid gap-6 md:grid-cols-3">
    <div class="space-y-6 md:col-span-2">
      <section class="space-y-3 rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
        <header class="flex items-center justify-between">
          <h2 class="text-lg font-semibold text-indigo-900">Résumé IA</h2>
          <span class="text-xs font-medium text-slate-500"><%= @presenter.analysis_status %></span>
        </header>

        <% if @presenter.analysis_available? %>
          <p class="text-sm leading-relaxed text-slate-600"><%= @presenter.summary %></p>
        <% else %>
          <p class="text-sm italic text-slate-500">L'analyse est en cours. Les résultats apparaîtront ici une fois disponibles.</p>
        <% end %>
      </section>

      <section class="space-y-3 rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
        <header>
          <h2 class="text-lg font-semibold text-indigo-900">Description complète</h2>
        </header>
        <article class="prose prose-sm max-w-none text-slate-700">
          <%= simple_format(@presenter.description) %>
        </article>
      </section>
    </div>

    <aside class="space-y-6">
      <section class="space-y-3 rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
        <h2 class="text-lg font-semibold text-indigo-900">Détails</h2>
        <dl class="space-y-2 text-sm text-slate-600">
          <div class="flex justify-between">
            <dt>Contrat</dt>
            <dd><%= @job_offer.contract_type.presence || "Non précisé" %></dd>
          </div>
          <div class="flex justify-between">
            <dt>Séniorité</dt>
            <dd><%= @job_offer.seniority_level.presence || "Non précisée" %></dd>
          </div>
          <div class="flex justify-between">
            <dt>Importée le</dt>
            <dd><%= l @job_offer.created_at, format: :long %></dd>
          </div>
        </dl>
      </section>

      <section class="space-y-3 rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
        <h2 class="text-lg font-semibold text-indigo-900">Stack détectée</h2>
        <% if @presenter.tech_stack.any? %>
          <ul class="flex flex-wrap gap-2">
            <% @presenter.tech_stack.each do |tech| %>
              <li class="rounded-full bg-indigo-50 px-3 py-1 text-xs font-semibold text-indigo-800"><%= tech %></li>
            <% end %>
          </ul>
        <% else %>
          <p class="text-sm italic text-slate-500">L'analyse IA complétera cette section.</p>
        <% end %>
      </section>
    </aside>
  </div>
</section>
